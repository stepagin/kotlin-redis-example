# Пример использования Redis в Kotlin.

## 1. Установка Redis 
Туториал: [ссылка](https://timeweb.cloud/tutorials/redis/ustanovka-i-nastrojka-redis-dlya-raznyh-os).

**На Linux:**
```shell
sudo apt update
sudo apt install redis-server -y
```

Демон запустится на ``localhost:6379``.

По инструкции настраиваем Redis, генерируем пароль, добавляем его в конфигурацию.

В коде файла ``Main.kt`` записываем пароль в переменную ``password`` или достаём его из внешнего файла.


Проверить, запущен ли Redis, можно командой:
```shell
sudo netstat -lnp | grep redis
```

В инструкции написано, как подключиться к Redis удалённо. Мы будем тестировать локально.

Подключиться к Redis через терминал можно командой:

```shell
redis-cli -a <пароль>
```

## 2. Подключение

Открываем проект, вводим строчки для подключения к jedis:
```kotlin
val jedis = Jedis("localhost", 6379)
jedis.auth(password)
```

## 3. Работа

Дальше всё как в проекте: 

* отправлять в каналы через ``Jedis::publish``
* получать посредством класса-наследника ``JedisPubSub`` и переопределённого метода ``onMessage``

## 4. Создание Jar-файлов

В проекте представлены 2 класса: ``Sender`` (отправитель) и ``Receiver`` (получатель).

Для проверки работы у себя на машине, необходимо закомментировать нужные строки в файле ``Main.kt`` и собрать 2 Jar-файла через IDE или командой:
```shell
./gradlew jar
```

Jar-файлы необходимо собирать с зависимостями, иначе Jedis не будет доступен. В проекте это всё уже настроено.

При запуске этих двух файлов в терминале по отдельности всё будет работать. По крайней мере у меня работает :)
